{% extends 'base.html' %}
{% import '_base.html' as macros %}
{% import 'analytics/_analytics.html' as analytics %}

{% block content %}
    {{ macros.header() }}

    <main class="container py-4">
        <h1 class="h3 fw-bold">Analytics</h1>

        <p>
            Below are presented a set of order book analytics for Mango's spot markets.
            See here for the liquidity calculation logic and here for the slippage calculation logic.
            Note that to avoid ghost liquidity skewing the results, only orders priced within 3% of
            the mid price are accounted for in all calculations.
        </p>

        <p>Select a pair whose liquidity analysis you'd like to see. Times are in UTC. Charts are updated every hour. They were last updated at (insert date).</p>

        <p></p>

        {{ analytics.instrument_selector(instrument, perpetuals, spot) }}

        <br>

        <div hx-trigger="load" hx-get="/analytics/liquidity?instrument={{ instrument }}">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-center align-items-center py-4">
                        <div class="spinner-border"></div>
                    </div>
                </div>
            </div>
        </div>

        <br>

        <div hx-trigger="load" hx-get="/analytics/slippages?instrument={{ instrument }}">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-center align-items-center py-4">
                        <div class="spinner-border"></div>
                    </div>
                </div>
            </div>

            <br>

            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-center align-items-center py-4">
                        <div class="spinner-border"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    {{ macros.footer() }}
{% endblock %}
